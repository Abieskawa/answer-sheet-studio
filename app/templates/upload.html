{% extends "base.html" %}
{% block content %}
<h1>{{ t.upload_title }}</h1>
<form class="form" action="/api/process" method="post" enctype="multipart/form-data">
  <label>{{ t.upload_label_num_questions }}
    <input type="number" name="num_questions" min="1" max="100" placeholder="{{ t.upload_ph_num_questions }}" required />
  </label>

  <label>{{ t.upload_label_choices_count }}
    <select name="choices_count">
      <option value="3">ABC</option>
      <option value="4" selected>ABCD</option>
      <option value="5">ABCDE</option>
    </select>
  </label>

  <label>{{ t.upload_label_pdf }}
    <input type="file" name="pdf" accept="application/pdf" required />
  </label>

  <button type="submit">{{ t.upload_btn_process }}</button>

  <p class="hint">{{ t.upload_hint_output }}</p>
</form>

<script>
  (() => {
    const key = "answer_sheet_studio_choices_count";
    const select = document.querySelector('select[name="choices_count"]');
    if (!select) return;
    const saved = localStorage.getItem(key);
    if (saved && /^(3|4|5)$/.test(saved)) select.value = saved;
    select.addEventListener("change", () => localStorage.setItem(key, select.value));
  })();
</script>
{% endblock %}
